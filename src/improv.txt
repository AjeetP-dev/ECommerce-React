try to implement quantity as non-state variable